## í«ë°ì´ì¦ˆ
<img alt="header" width="1024" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/header.png?raw=true">

<p align="center">
  <a href="https://apps.apple.com/kr/app/%ED%8E%AB%EB%8D%B0%EC%9D%B4%EC%A6%88/id6738037038">
    <img alt="app_store" height="60" src="https://raw.githubusercontent.com/zzikbu/PetDays/main/readme_assets/app_store.png">
  </a>
  <a href="https://play.google.com/store/apps/details?id=com.devmoichi.petdays">
    <img alt="play_store" height="60" src="https://raw.githubusercontent.com/zzikbu/PetDays/main/readme_assets/play_store.png">
  </a>
</p>

## ëª©ì°¨
- [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
- [ê°œë°œ ê¸°ê°„](#ê°œë°œ-ê¸°ê°„)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ê¸°íš ë° ë””ìì¸](#ê¸°íš-ë°-ë””ìì¸)
- [ê¸°ëŠ¥ ì‹¤í–‰ í™”ë©´](#ê¸°ëŠ¥-ì‹¤í–‰-í™”ë©´)
- [ì£¼ìš” ê¸°ìˆ ](#ì£¼ìš”-ê¸°ìˆ )
- [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
<br><br>

## í”„ë¡œì íŠ¸ ì†Œê°œ
**1ì¸ ê¸°íš / ë””ìì¸ / ê°œë°œ**
<br><br>

ë°˜ë ¤ë™ë¬¼ì˜ ì„±ì¥ì¼ê¸°, ì§„ë£Œê¸°ë¡, ì‚°ì±…ê¸°ë¡ì„ í•œê³³ì— ë‹´ì•„ ë³´ê´€í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.
<br><br>

## ê°œë°œ ê¸°ê°„
- **ê¸°íš & ë””ìì¸:** 2024.07.29 ~ 2024.08.28 (ì•½ 1ê°œì›”)
- **ê¸°ëŠ¥ ê°œë°œ & ë°°í¬:** 2024.08.14 ~ 2024.12.01 (ì•½ 5ê°œì›”)
- **ë¦¬íŒ©í† ë§ & ìœ ì§€ë³´ìˆ˜:** 2024.12.01 ~ ì§„í–‰ ì¤‘
<br>

## ì£¼ìš” ê¸°ëŠ¥
1. **ë°˜ë ¤ë™ë¬¼:** ë°˜ë ¤ë™ë¬¼ì˜ ê¸°ë³¸ ì •ë³´(ì´ë¦„, í’ˆì¢…, ìƒë…„ì›”ì¼, ì„±ë³„, ì¤‘ì„±í™” ì—¬ë¶€)ë¥¼ ë“±ë¡í•˜ê³ , í•¨ê»˜í•œ ì†Œì¤‘í•œ ì‹œê°„ì„ ì¼ ë‹¨ìœ„ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br><br>

2. **ì„±ì¥ì¼ê¸°:** ë°˜ë ¤ë™ë¬¼ê³¼ì˜ íŠ¹ë³„í•œ ìˆœê°„ì„ ì‚¬ì§„ê³¼ ê¸€ë¡œ ê¸°ë¡í•´ ì¶”ì–µì„ ê°„ì§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³µê°œ/ë¹„ê³µê°œ ì„¤ì •ì„ í†µí•´ ë‹¤ë¥¸ ë°˜ë ¤ì¸ë“¤ê³¼ ê²½í—˜ì„ ê³µìœ í•˜ê±°ë‚˜ ê°œì¸ì ìœ¼ë¡œ ë³´ê´€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br><br>

3. **ì§„ë£Œê¸°ë¡:** ë³‘ì› ë°©ë¬¸ ê¸°ë¡ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§„ë£Œì¼, ì´ìœ , ë³‘ì›ëª…, ìˆ˜ì˜ì‚¬ëª…, ê´€ë ¨ ì‚¬ì§„ ë° ë©”ëª¨ë¥¼ í•¨ê»˜ ê¸°ë¡í•˜ì—¬ ë°˜ë ¤ë™ë¬¼ì˜ ê±´ê°• ì´ë ¥ì„ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br><br>

4. **ì‚°ì±…:** GPSë¥¼ í™œìš©í•˜ì—¬ ì‚°ì±… ì‹œê°„, ê±°ë¦¬, ê²½ë¡œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê¸°ë¡í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚°ì±… ê²½ë¡œëŠ” ì§€ë„ ì´ë¯¸ì§€ë¡œ ì €ì¥ë˜ì–´ ì¶”í›„ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
<br><br>

5. **í”¼ë“œ:** ê³µê°œëœ ì„±ì¥ì¼ê¸°ë¥¼ í†µí•´ ë‹¤ë¥¸ ë°˜ë ¤ì¸ë“¤ê³¼ ê²½í—˜ì„ ê³µìœ í•˜ê³ , ì¢‹ì•„ìš”ë¥¼ í†µí•´ ê³µê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HOT í”¼ë“œë¥¼ í†µí•´ ì¸ê¸° ìˆëŠ” ê²Œì‹œë¬¼ì„ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br><br>

## ê¸°ìˆ  ìŠ¤íƒ
- **ì–¸ì–´:** `Dart`
- **í”„ë ˆì„ì›Œí¬:** `Flutter`
- **ì•„í‚¤í…ì³**: `MVVM`<br>
  <img alt="architecture" height="280" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/architecture.png?raw=true">

- **ì‚¬ìš©í•œ íŒ¨í‚¤ì§€**
  ```yaml
  # Firebase
  firebase_core: ^3.6.0
  firebase_auth: ^5.3.1
  cloud_firestore: ^5.4.3
  firebase_storage: ^12.3.2
  google_sign_in: ^6.2.1
  
  # State Management
  provider: ^6.1.2
  state_notifier: ^1.0.0
  flutter_state_notifier: ^1.0.0
  
  # Navigation
  go_router: ^14.7.2
  
  # Location
  geolocator: ^13.0.1
  google_maps_flutter: ^2.9.0
  
  # UI/UX
  carousel_slider: ^5.0.0
  smooth_page_indicator: ^1.2.0+3
  extended_image: ^8.3.1
  flutter_svg: ^2.0.10+1
  pull_down_button: ^0.10.1
  cupertino_icons: ^1.0.6
  
  # Utils
  intl: ^0.19.0
  uuid: ^4.5.1
  string_validator: ^1.1.0
  image_picker: ^1.1.2
  webview_flutter: ^4.10.0
  package_info_plus: ^8.1.0
  permission_handler: ^11.3.1
  ```
<br>

## ê¸°íš ë° ë””ìì¸
### [ğŸ”— ê¸°íš ë° ë””ìì¸ Figma ğŸ”—](https://www.figma.com/design/LbVM8DvEcGfaR47cfpLk0c/%ED%8E%AB%EB%8D%B0%EC%9D%B4%EC%A6%88_%EB%94%94%EC%9E%90%EC%9D%B8?node-id=3-219&t=x3TuifRTAZvSPb8Z-1)

| IA                                                           | FlowChart                                                    |
|:------------------------------------------------------------:|:------------------------------------------------------------:|
| <img alt="ia" height="309" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/ia.png?raw=true"> | <img alt="flowchart" height="309" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/flowchart.png?raw=true"> |

| í™ˆ                                                            | ë°˜ë ¤ë™ë¬¼ ìƒì„¸ë³´ê¸°                                                    | í”¼ë“œ í™ˆ                                                         | ì„±ì¥ì¼ê¸° ìƒì„¸ë³´ê¸°                                                    |
|:------------------------------------------------------------:|:------------------------------------------------------------:|:------------------------------------------------------------:|:------------------------------------------------------------:|
| <img alt="home" width="144" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/home.png?raw=true"> | <img alt="pet_detail" width="190" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/pet_detail.png?raw=true"> | <img alt="feed_home" width="178" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/feed_home.png?raw=true"> | <img alt="diary_detail" width="172" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/diary_detail.png?raw=true"> |
| ì‚°ì±… í™ˆ                                                         | ì‚°ì±… ìƒì„¸ë³´ê¸°                                                      | ì‚°ì±… ì§€ë„ íŠ¸ë˜í‚¹                                                    |                                                              |
| <img alt="walk_home" width="174" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/walk_home.png?raw=true"> | <img alt="walk_detail" width="174" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/walk_detail.png?raw=true"> | <img alt="walk_map" width="174" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/plan_design/walk_map.png?raw=true"> |                                                              |
<br>

## ê¸°ëŠ¥ ì‹¤í–‰ í™”ë©´

| ë¡œê·¸ì¸                                                          | íšŒì›ê°€ì…                                                         | í™ˆ                                                            | ë°˜ë ¤ë™ë¬¼ ì¶”ê°€                                                      |
|:------------------------------------------------------------:|:------------------------------------------------------------:|:------------------------------------------------------------:|:------------------------------------------------------------:|
| <img alt="signin" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/signin.gif?raw=true"> | <img alt="signup" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/signup.gif?raw=true"> | <img alt="home" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/home.gif?raw=true"> | <img alt="pet" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/pet.gif?raw=true"> |
| ì„±ì¥ì¼ê¸°                                                         | ì§„ë£Œê¸°ë¡                                                         | ì‚°ì±…                                                           | í”¼ë“œ / ì¢‹ì•„ìš”                                                     |
| <img alt="diary" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/diary.gif?raw=true"> | <img alt="medical" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/medical.gif?raw=true"> | <img alt="walk" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/walk.gif?raw=true"> | <img alt="feed" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/feed.gif?raw=true"> |
| ì‹ ê³  / ì°¨ë‹¨                                                      | ë‹‰ë„¤ì„ ë³€ê²½                                                       | í”„ë¡œí•„ ì´ë¯¸ì§€ ë³€ê²½ / ì‚­ì œ                                              | ê³µê°œí•œ ì„±ì¥ì¼ê¸°                                                     |
| <img alt="report_block" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/report_block.gif?raw=true"> | <img alt="nickname" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/nickname.gif?raw=true"> | <img alt="profile_image" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/profile_image.gif?raw=true"> | <img alt="open" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/open.PNG?raw=true"> |
| ì¢‹ì•„ìš”í•œ ì„±ì¥ì¼ê¸°                                                    |                                                              |                                                              |                                                              |
| <img alt="like" width="180" src="https://github.com/zzikbu/PetDays/blob/main/readme_assets/gif/like.PNG?raw=true"> |                                                              |                                                              |                                                              |
<br>

## ì£¼ìš” ê¸°ìˆ 
### âœ… Providerì™€ StateNotifierë¥¼ í™œìš©í•œ íš¨ìœ¨ì ì¸ ìƒíƒœ ê´€ë¦¬
ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ì™€ ë‹¤ì–‘í•œ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ê¸°ì¡´ `ChangeNotifier`ì—ì„œ `StateNotifier`ë¡œ ì „í™˜í–ˆìŠµë‹ˆë‹¤. `StateNotifier`ëŠ” ë¶ˆë³€ ê°ì²´ ê¸°ë°˜ì˜ ìƒíƒœ ê´€ë¦¬ë¥¼ í†µí•´ ìƒíƒœ ë³€ê²½ì„ ëª…í™•íˆ ì¶”ì í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, init, submitting, fetching, success, error ë“±ì˜ ì„¸ë¶„í™”ëœ ìƒíƒœ êµ¬ë¶„ìœ¼ë¡œ UIì—ì„œ ë¡œë”© ìƒíƒœë‚˜ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ì§ê´€ì ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ `copyWith` íŒ¨í„´ì„ í†µí•œ ëª…í™•í•œ ìƒíƒœ ë³€ê²½ê³¼ ì—„ê²©í•œ íƒ€ì… ì •ì˜ë¡œ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ì‚¬ì „ì— ë°©ì§€í•˜ì—¬ ì•±ì˜ ì•ˆì •ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í¬ê²Œ í–¥ìƒì‹œì¼°ìŠµë‹ˆë‹¤.
 
```dart
// ìƒíƒœ ì •ì˜
enum MedicalStatus { init, submitting, fetching, success, error }

class MedicalState {
 final MedicalStatus medicalStatus;
 final List<MedicalModel> medicalList;
 
 MedicalState copyWith({MedicalStatus? medicalStatus, List<MedicalModel>? medicalList}) {
   return MedicalState(
     medicalStatus: medicalStatus ?? this.medicalStatus,
     medicalList: medicalList ?? this.medicalList,
   );
 }
}

// Provider
class MedicalProvider extends StateNotifier<MedicalState> with LocatorMixin {
 Future<void> getMedicalList({required String uid}) async {
   try {
     state = state.copyWith(medicalStatus: MedicalStatus.fetching);
     final medicalList = await read<MedicalRepository>().getMedicalList(uid: uid);
     state = state.copyWith(medicalList: medicalList, medicalStatus: MedicalStatus.success);
   } on CustomException catch (_) {
     state = state.copyWith(medicalStatus: MedicalStatus.error);
     rethrow;
   }
 }
}

// UI ì‚¬ìš©
final isLoading = context.watch<MedicalState>().medicalStatus == MedicalStatus.fetching;
final medicalList = context.watch<MedicalState>().medicalList;
```
<br>

### âœ… Database Batch
`Batch`ë¥¼ í™œìš©í•˜ì—¬ ì„±ì¥ì¼ê¸° ì‚­ì œ ì‹œ ë°œìƒí•˜ëŠ” ë³µì¡í•œ ì—°ê´€ ë°ì´í„° ì²˜ë¦¬ë¥¼ ì›ìì ìœ¼ë¡œ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤. ì„±ì¥ì¼ê¸°ê°€ ì‚­ì œë  ë•ŒëŠ” ë‹¨ìˆœíˆ í•´ë‹¹ ë¬¸ì„œë§Œ ì œê±°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, í•´ë‹¹ ê²Œì‹œë¬¼ì— ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥¸ ëª¨ë“  ì‚¬ìš©ìì˜ ì¢‹ì•„ìš” ëª©ë¡ì—ì„œ í•´ë‹¹ ê²Œì‹œë¬¼ IDë¥¼ ì œê±°í•˜ê³ , ì‘ì„±ìì˜ ê²Œì‹œë¬¼ ì¹´ìš´íŠ¸ë¥¼ ê°ì†Œì‹œì¼œì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì—¬ëŸ¬ ë¬¸ì„œì˜ ë³€ê²½ ì‘ì—…ì„ `Batch`ë¡œ ë¬¶ì–´ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ì‘ì—… ì¤‘ ì¼ë¶€ê°€ ì‹¤íŒ¨í•˜ë”ë¼ë„ ì „ì²´ê°€ ë¡¤ë°±ë˜ì–´ ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ì¥í•˜ê³ , ë‹¨ì¼ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ìœ¼ë¡œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí•˜ì—¬ ì„±ëŠ¥ íš¨ìœ¨ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

```dart
WriteBatch batch = firebaseFirestore.batch();

// ì„±ì¥ì¼ê¸° ì¢‹ì•„ìš” ëˆ„ë¥¸ ì‚¬ìš©ì ì°¾ê¸°
List<String> likes = await diaryDocRef
   .get()
   .then((value) => List<String>.from(value.data()!['likes']));

// â‘  í•´ë‹¹ ì‚¬ìš©ìë“¤ì˜ likes í•„ë“œì—ì„œ ì„±ì¥ì¼ê¸° ID ì œê±°  
likes.forEach((uid) {
 batch.update(firebaseFirestore.collection('users').doc(uid), {
   'likes': FieldValue.arrayRemove([diaryModel.diaryId]),
 });
});

// â‘¡ ì„±ì¥ì¼ê¸° ë¬¸ì„œ ì‚­ì œ
batch.delete(diaryDocRef);

// â‘¢ ì‘ì„±ìì˜ diaryCount ê°ì†Œ
batch.update(writerDocRef, {
 'diaryCount': FieldValue.increment(-1),
});

// ì‹¤í–‰
batch.commit();
```
<br>

### âœ… ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì ê³¼ GPS ë°ì´í„° ì²˜ë¦¬
GPSë¥¼ í™œìš©í•œ ì‚°ì±… ê¸°ëŠ¥ì—ì„œ ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì , ê²½ë¡œ ì‹œê°í™”, ê±°ë¦¬/ì‹œê°„ ê³„ì‚°ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. Geolocatorë¡œ ìœ„ì¹˜ ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°›ì•„ Google Mapsì˜ Polylineìœ¼ë¡œ ì‹¤ì‹œê°„ ê²½ë¡œë¥¼ ê·¸ë¦¬ê³ , ì‚°ì±… ì™„ë£Œ ì‹œ ì§€ë„ë¥¼ ìº¡ì²˜í•˜ì—¬ ì´ë¯¸ì§€ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ë˜í•œ ì•± ìƒëª…ì£¼ê¸° ê´€ë¦¬ë¥¼ í†µí•´ ì‚°ì±… ì¤‘ ì•± ì¢…ë£Œë‚˜ ë°±ê·¸ë¼ìš´ë“œ ì „í™˜ ì‹œì—ë„ ì•ˆì •ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³´ì¡´í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- [walk_map_screen.dart](https://github.com/zzikbu/petdays/blob/main/lib/screens/walk/walk_map_screen.dart)
<br>

### âœ… Custom Exceptionì„ í™œìš©í•œ ì²´ê³„ì ì¸ ì—ëŸ¬ ì²˜ë¦¬
ì•± ì „ë°˜ì— ê±¸ì³ ì¼ê´€ì„± ìˆëŠ” ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ `CustomException` í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. titleê³¼ messageë¡œ êµ¬ì¡°í™”í•˜ì—¬ ì—ëŸ¬ ë‹¤ì´ì–¼ë¡œê·¸ì—ì„œ ì¼ê´€ëœ í˜•íƒœë¡œ í‘œì‹œí•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤. ëª¨ë“  Repository ë ˆì´ì–´ì—ì„œ Firebase ì—ëŸ¬ë¥¼ catchí•˜ì—¬ ì ì ˆí•œ ë©”ì‹œì§€ë¡œ ë³€í™˜í•˜ê³ , Providerì™€ UIì—ì„œëŠ” `rethrow`ë¥¼ í†µí•´ ì—ëŸ¬ë¥¼ ì „íŒŒí•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ í”¼ë“œë°±ì„ ì œê³µí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

```dart
// CustomException ì •ì˜
class CustomException implements Exception {
 final String title;
 final String message;
 const CustomException({required this.title, required this.message});
}

// ì—ëŸ¬ ì²˜ë¦¬
Future<List<DiaryModel>> getDiaryList({required String uid}) async {
 try {
   // Firestoreì—ì„œ ì‚¬ìš©ìì˜ ì„±ì¥ì¼ê¸° ëª©ë¡ ì¡°íšŒ
   return diaryList;
 } on FirebaseException {
   throw const CustomException(
     title: 'ì„±ì¥ì¼ê¸°',
     message: 'ì„±ì¥ì¼ê¸° ê°€ì ¸ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\në‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',
   );
 } catch (_) {
   throw const CustomException(
     title: "ì„±ì¥ì¼ê¸°",
     message: "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\në‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\në¬¸ì˜: devmoichi@gmail.com",
   );
 }
}

// UIì—ì„œ ì¼ê´€ëœ ì—ëŸ¬ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
void showErrorDialog(BuildContext context, CustomException e) {
 showDialog(
   context: context,
   builder: (context) => Dialog(
     child: Column(
       children: [
         Text(e.title),
         Text(e.message),
         // í™•ì¸ ë²„íŠ¼...
       ],
     ),
   ),
 );
}
```
<br>

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
### ğŸ’¥ íƒ­ ì „í™˜ ì‹œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ë™ê¸°í™” ë¬¸ì œ

**ë¬¸ì œ ìƒí™©**

í”¼ë“œ í™”ë©´ì—ì„œ HOT/ì „ì²´ íƒ­ ê°„ ì „í™˜ ì‹œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°€ ë™ê¸°í™”ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” `í•˜ë‚˜ì˜ ListView.builderë¥¼ ì‚¬ìš©`í•˜ì—¬ currentFeedList ë³€ìˆ˜ë¡œ ë°ì´í„°ë§Œ êµì²´í•˜ëŠ” ë°©ì‹ì´ì—ˆëŠ”ë°, ë™ì¼í•œ ScrollControllerë¥¼ ê³µìœ í•˜ë©´ì„œ HOT í”¼ë“œì—ì„œ ìŠ¤í¬ë¡¤í•œ ìœ„ì¹˜ê°€ ì „ì²´ í”¼ë“œì—ë„ ê·¸ëŒ€ë¡œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. (ì‚¬ìš©ìê°€ HOT í”¼ë“œì—ì„œ í•˜ë‹¨ê¹Œì§€ ìŠ¤í¬ë¡¤ â†’ ì „ì²´ í”¼ë“œë¡œ ì „í™˜ â†’ ë™ì¼í•œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì—ì„œ ì‹œì‘)

**ê¸°ì¡´ ë¬¸ì œ ì½”ë“œ**

```dart
class _FeedHomeScreenState extends State<FeedHomeScreen> {
  bool _isHotFeed = true;

  @override
  Widget build(BuildContext context) {
    final feedState = context.watch<FeedState>();
    // íƒ­ ìƒíƒœì— ë”°ë¼ ë°ì´í„°ë§Œ ë³€ê²½
    final currentFeedList = _isHotFeed ? feedState.hotFeedList : feedState.feedList;
    
    return Scaffold(
      body: ListView.builder(  // ë™ì¼í•œ ListView ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©
        padding: const EdgeInsets.fromLTRB(24, 0, 24, 24),
        itemCount: currentFeedList.length,  // ë°ì´í„°ë§Œ êµì²´
        itemBuilder: (context, index) {
          final diaryModel = currentFeedList[index];
          return DiaryCardWidget(
            diaryModel: diaryModel,
            index: index,
            diaryType: _isHotFeed ? DiaryType.hotFeed : DiaryType.allFeed,
            isLike: isLike,
            showLock: false,
          );
        },
      ),
    );
  }
}
```

**í•´ê²° ë°©ë²•**

`Offstage` ìœ„ì ¯ì„ í™œìš©í•˜ì—¬ HOT í”¼ë“œì™€ ì „ì²´ í”¼ë“œë¥¼ ê°ê° ë…ë¦½ì ì¸ FeedListViewë¡œ ë¶„ë¦¬í•˜ê³ , ê°ê° ê³ ìœ í•œ ScrollControllerë¥¼ ê°€ì§€ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. `Offstage` ìœ„ì ¯ì€ ìœ„ì ¯ì„ ì¡°ê±´ë¶€ë¡œ ìˆ¨ê¸°ë©´ì„œë„ ìœ„ì ¯ íŠ¸ë¦¬ì—ëŠ” ìœ ì§€í•˜ì—¬ ìƒíƒœë¥¼ ë³´ì¡´í•˜ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤. offstage ì†ì„±ì´ trueì¼ ë•ŒëŠ” ìœ„ì ¯ì„ í™”ë©´ì—ì„œ ìˆ¨ê¸°ê³  ë Œë”ë§í•˜ì§€ ì•Šìœ¼ë©°, falseì¼ ë•ŒëŠ” ìœ„ì ¯ì„ í™”ë©´ì— ì •ìƒì ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° íƒ­ì´ ë…ë¦½ì ì¸ ìŠ¤í¬ë¡¤ ìƒíƒœë¥¼ ìœ ì§€í•˜ê²Œ ë˜ì–´ HOT í”¼ë“œì™€ ì „ì²´ í”¼ë“œ ê°„ì˜ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ë™ê¸°í™” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

**í•´ê²° ì½”ë“œ**

```dart
class _FeedHomeScreenState extends State<FeedHomeScreen> {
  bool _isHotFeed = true;

  @override
  Widget build(BuildContext context) {
    final feedState = context.watch<FeedState>();
    final isLoading = feedState.feedStatus == FeedStatus.fetching;

    return Scaffold(
      body: isLoading
        ? const Center(child: CircularProgressIndicator(color: Palette.subGreen))
        : Stack(  // Stackìœ¼ë¡œ ë‘ ê°œì˜ ë…ë¦½ì ì¸ ListView ê´€ë¦¬
            children: [
              // HOT í”¼ë“œ - ë…ë¦½ì ì¸ FeedListView ì¸ìŠ¤í„´ìŠ¤
              Offstage(
                offstage: !_isHotFeed,  // falseì¼ ë•Œ í™”ë©´ì— í‘œì‹œ
                child: FeedListView(
                  feedList: feedState.hotFeedList,
                  currentUserId: _currentUserId,
                  isHotFeed: true,
                  onRefresh: _getFeedList,
                ),
              ),
              // ì „ì²´ í”¼ë“œ - ë…ë¦½ì ì¸ FeedListView ì¸ìŠ¤í„´ìŠ¤
              Offstage(
                offstage: _isHotFeed,   // trueì¼ ë•Œ í™”ë©´ì—ì„œ ìˆ¨ê¹€
                child: FeedListView(
                  feedList: feedState.feedList,
                  currentUserId: _currentUserId,
                  isHotFeed: false,
                  onRefresh: _getFeedList,
                ),
              ),
            ],
          ),
    );
  }
}
```
<br>

### ğŸ’¥ ì¢‹ì•„ìš” ê¸°ëŠ¥ì—ì„œ ë™ì‹œì„± ë¬¸ì œ
**ë¬¸ì œ ìƒí™©**

ì„±ì¥ì¼ê¸° ì¢‹ì•„ìš” ê¸°ëŠ¥ì—ì„œ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë™ì‹œì— ê°™ì€ ê²Œì‹œë¬¼ì— ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ê±°ë‚˜, í•œ ì‚¬ìš©ìê°€ ë¹ ë¥´ê²Œ ì—°ì†ìœ¼ë¡œ ì¢‹ì•„ìš” ë²„íŠ¼ì„ í´ë¦­í•  ë•Œ ë°ì´í„° ë¶ˆì¼ì¹˜ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì¢‹ì•„ìš” ìƒíƒœ í™•ì¸, ì¹´ìš´íŠ¸ ì¦ê°, ì‚¬ìš©ì ì¢‹ì•„ìš” ëª©ë¡ ì—…ë°ì´íŠ¸ê°€ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©´ì„œ ë™ì‹œ ì ‘ê·¼ ì‹œ ì¢‹ì•„ìš” ì¹´ìš´íŠ¸ê°€ ë¶€ì •í™•í•˜ê²Œ ì§‘ê³„ë˜ê±°ë‚˜ ì‚¬ìš©ìì˜ ì¢‹ì•„ìš” ìƒíƒœê°€ ì˜ë„ì™€ ë‹¤ë¥´ê²Œ ì €ì¥ë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

**í•´ê²° ë°©ë²•**

Database Transactionì„ í™œìš©í•˜ì—¬ ì¢‹ì•„ìš” ê´€ë ¨ ëª¨ë“  ì‘ì—…ì„ í•˜ë‚˜ì˜ ì›ìì  ì—°ì‚°ìœ¼ë¡œ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤. Transactionì€ ë™ì‹œ ì ‘ê·¼ìœ¼ë¡œ ì¸í•œ ì¶©ëŒ ì‹œ ìë™ìœ¼ë¡œ ìµœëŒ€ 5íšŒê¹Œì§€ ì¬ì‹œë„í•˜ì—¬ ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. UIì—ì„œëŠ” ì¤‘ë³µ í´ë¦­ ë°©ì§€ë¥¼ ìœ„í•œ _isLiking í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¢‹ì•„ìš” ì²˜ë¦¬ ì¤‘ì—ëŠ” ë²„íŠ¼ì„ ë¹„í™œì„±í™”í–ˆìŠµë‹ˆë‹¤.

**í•´ê²° ì½”ë“œ**
```dart
// Database Transaction
bool isDiaryContains = diaryLikes.contains(uid);

transaction.update(diaryDocRef, {
  'likes': isDiaryContains
      ? FieldValue.arrayRemove([uid])
      : FieldValue.arrayUnion([uid]),
  'likeCount': isDiaryContains
      ? FieldValue.increment(-1)
      : FieldValue.increment(1),
});

transaction.update(userDocRef, {
  'likes': userLikes.contains(diaryId)
      ? FieldValue.arrayRemove([diaryId])
      : FieldValue.arrayUnion([diaryId]),
});
```
